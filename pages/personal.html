<!DOCTYPE html>
<html lang="en" class="personal-page"> <!-- Add class for v1.0.1 styling -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Rofilid - Personal financial knowledge, tools, and coaching for Nigerians and beyond.">
  <title>Personal Financial Solutions - ROFILID</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Use Inter font for personal page -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Reference root styles.css -->
  <link rel="stylesheet" href="../styles.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Decorative Background Elements -->
  <div class="deco-blur blur-1"></div>
  <div class="deco-blur blur-2"></div>
  <div class="deco-blur blur-3"></div>

  <!-- Header Section (Same structure, CSS overrides style it) -->
  <header class="site-header">
    <div class="container header-container">
      <div class="logo">
        <a href="index.html" aria-label="Rofilid Home">
           <!-- Corrected path as per instruction -->
          <img src="../assets/images/rofilid-logo-white.svg" alt="Rofilid Logo" width="120" height="40" loading="eager">
        </a>
      </div>
      <nav aria-label="Main navigation">
        <button class="mobile-menu-toggle" aria-expanded="false" aria-controls="primary-navigation">
          <span class="sr-only">Menu</span>
          <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
        <ul id="primary-navigation" class="nav-list">
           <!-- Corrected paths -->
          <li class="nav-item"><a href="../index.html" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="corporate.html" class="nav-link">Corporate</a></li>
          <li class="nav-item"><a href="personal.html" class="nav-link active-page">Personal</a></li>
          <li class="nav-item"><a href="../index.html#services" class="nav-link">Services</a></li>
        </ul>
      </nav>
       <!-- Corrected path -->
      <a href="index.html#services" class="connect-button" aria-label="Our Services">Our Services</a>
    </div>
  </header>

  <main>
    <!-- I. Introduction Section (Updated v1.0.1 Structure) -->
    <section class="page-intro">
      <div class="container">
        <h1>Empower Yourself with Financial Knowledge</h1>
        <p class="subheadline">Take control of your finances and secure your future, wherever you are.</p>
        <p>Financial literacy is crucial for personal well-being. In Nigeria, less than 50% of adults grasp basic financial principles, and access to formal banking remains a challenge for many (only 40%). ROFILID provides accessible resources, interactive tools, and expert coaching designed to help individuals in Nigeria and around the world make informed financial decisions, manage money effectively, and achieve lasting financial security.</p>

        <!-- New Stats Grid (v1.0.1) -->
        <div class="stats-grid">
          <div class="stat-card">
            <i class="fas fa-users"></i>
            <!-- Values will be animated by JS -->
            <h4>0+ Empowered</h4>
            <p>Individuals gaining financial freedom</p>
            <span class="stat-target" style="display: none;">10000</span> <!-- Hidden target for JS -->
          </div>
          <div class="stat-card">
            <i class="fas fa-chart-line"></i>
             <!-- Values will be animated by JS -->
            <h4>0% Success Rate</h4>
            <p>Of users achieving their financial goals</p>
             <span class="stat-target" style="display: none;">85</span> <!-- Hidden target for JS -->
          </div>
           <div class="stat-card">
            <i class="fas fa-book-open-reader"></i>
             <!-- Values will be animated by JS -->
            <h4>0+ Resources</h4>
            <p>Guides, Tools & Quizzes Available</p>
             <span class="stat-target" style="display: none;">50</span> <!-- Added third stat example -->
          </div>
        </div>
      </div>
    </section>

    <!-- II. Personal Finance Resources (Updated v1.0.1 Structure) -->
    <section id="personal-resources" class="page-section bg-light">
      <div class="container">
        <h2>Learn and Grow</h2>
        <p class="section-description">Access a wealth of educational materials designed to enhance your financial understanding.</p>

        <div class="resource-grid">
          <!-- Resource Card 1: Blog -->
          <article class="resource-card">
            <div class="card-image">
               <!-- Placeholder image - replace with actual image -->
              <img src="../assets/images/blog-placeholder.jpg" alt="Person reading financial articles on a tablet" loading="lazy">
            </div>
            <div class="card-content">
              <h3>Blog & Articles</h3>
              <p>Explore articles on budgeting, saving, investing, Nigeria-specific topics like navigating high inflation, understanding local tax nuances, and universal financial principles. <em>(Full Blog Coming Soon)</em></p>
              <div class="card-cta">
                <a href="#" class="btn" aria-disabled="true" style="cursor: not-allowed; opacity: 0.6;">Explore Latest Posts</a> <!-- Disabled styling added -->
              </div>
            </div>
          </article>

          <!-- Resource Card 2: Social Integration -->
          <article class="resource-card social-integration">
            <div class="card-header">
              <i class="fab fa-instagram"></i>
              <h3>@basicpfc Highlights</h3>
            </div>
            <div class="social-carousel">
              <!-- Post 1 -->
              <div class="social-post">
                <blockquote>
                  "Understanding compound interest is key! Even small savings grow massively over time. Check our guide. ðŸ‡³ðŸ‡¬ #FinanceNaija #SavingsGoal"
                  <footer>- @basicpfc</footer>
                </blockquote>
              </div>
               <!-- Post 2 (Image Example) -->
              <div class="social-post">
                 <!-- Placeholder image - replace with actual image -->
                <img src="../assets/images/social-placeholder.jpg" alt="Infographic showing budgeting tips" loading="lazy">
                <div class="post-engagement">
                  <span><i class="fas fa-heart"></i> 2.4K</span>
                  <span><i class="fas fa-comment"></i> 184</span>
                  <span><i class="fas fa-share"></i> 550</span>
                </div>
              </div>
              <!-- Post 3 -->
               <div class="social-post">
                 <blockquote>
                  "Debt reduction strategies that WORK! We break down the snowball vs. avalanche methods. Link in bio! ðŸ’° #DebtFreeJourney #NigeriaFinance"
                   <footer>- @basicpfc</footer>
                 </blockquote>
              </div>
              <!-- Add more posts as needed -->
            </div>
             <div class="card-cta" style="margin-top: var(--spacing-md); text-align:center;">
                <a href="https://instagram.com/rofi.lid" target="_blank" rel="noopener noreferrer" class="btn btn-outline">Follow Us on Instagram</a>
            </div>
          </article>

           <!-- Resource Card 3: Why Literacy Matters (Adapting old content) -->
          <article class="resource-card">
             <!-- Placeholder image -->
            <div class="card-image">
              <img src="../assets/images/literacy-placeholder.jpg" alt="Illustration of a person climbing stairs made of coins" loading="lazy">
            </div>
            <div class="card-content">
              <h3>Why Financial Literacy Matters</h3>
               <p>Understanding finance empowers you to make sound decisions, avoid costly mistakes, reduce stress, prepare for emergencies, and confidently achieve your financial goals.</p>
              <!-- Optional: Add a small CTA if desired -->
               <div class="card-cta">
                  <a href="#personal-coaching" class="btn btn-outline">Learn How Coaching Helps</a>
               </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- III. Personal Finance Tools (Updated v1.0.1 Structure + Quizzes) -->
    <section id="personal-tools" class="page-section">
      <div class="container">
        <h2>Tools for Success</h2>
        <p class="section-description">Utilize our interactive tools, templates, and quizzes to gain personalized insights and manage your finances more effectively.</p>

        <!-- New Template Grid (v1.0.1) -->
        <div class="template-grid">
          <!-- Template Card 1 -->
          <article class="template-card" data-template="budget">
            <div class="template-preview">
              <!-- Placeholder image - replace with actual -->
              <img src="../assets/images/template-budget-placeholder.jpg" alt="Spreadsheet budget template preview" loading="lazy">
              <span class="price-tag">Free</span> <!-- Updated price -->
            </div>
            <div class="template-details">
              <h3>Basic Budget Tracker</h3>
              <!-- Example Variants (Uncomment if needed) -->
              <!-- <div class="template-variants">
                <span class="variant active">Simple</span>
                <span class="variant">Detailed</span>
              </div> -->
              <p>A clean and simple spreadsheet to get you started with tracking income and expenses.</p>
              <div class="template-actions">
                <a href="#" class="btn btn-outline" aria-disabled="true" style="cursor: not-allowed; opacity: 0.6;">Preview</a>
                <a href="#" class="btn" aria-disabled="true" style="cursor: not-allowed; opacity: 0.6;">Download (Free)</a>
              </div>
            </div>
          </article>

          <!-- Template Card 2 -->
          <article class="template-card" data-template="networth">
            <div class="template-preview">
               <!-- Placeholder image - replace with actual -->
              <img src="../assets/images/template-networth-placeholder.jpg" alt="Net worth tracking template preview" loading="lazy">
              <span class="price-tag">â‚¦2,500</span> <!-- Example price -->
            </div>
            <div class="template-details">
              <h3>Net Worth Tracker Pro</h3>
              <p>Comprehensive template for tracking assets, liabilities, and calculating your net worth over time.</p>
              <div class="template-actions">
                 <a href="#" class="btn btn-outline" aria-disabled="true" style="cursor: not-allowed; opacity: 0.6;">Preview</a>
                <a href="#" class="btn" aria-disabled="true" style="cursor: not-allowed; opacity: 0.6;">Purchase</a>
              </div>
            </div>
          </article>
           <!-- Add more template cards as needed -->
        </div>

        <!-- Quizzes Section (Reintegrated from v1.0.0) -->
        <div class="quiz-section-container">
             <h3 style="text-align: center; margin-bottom: var(--spacing-xl); color: var(--color-primary); font-size: 1.8rem;">Test Your Knowledge</h3>
            <!-- Quiz 1 Container - JS will populate these -->
            <div id="quiz1-container" class="quiz-container">
                <h4>Basic Financial Literacy</h4>
                <div id="quiz1-question" class="quiz-question">
                    <!-- JS will insert Q1 text here -->
                </div>
                <div id="quiz1-options" class="quiz-options">
                    <!-- JS will insert Q1 options here -->
                </div>
                <div id="quiz1-feedback" class="quiz-feedback" style="display: none;"></div>
                <button id="quiz1-next" class="cta-button small quiz-next-btn" style="display: none;">Next Question</button>
                <div id="quiz1-results" class="quiz-results" style="display: none;"></div>
            </div>
             <!-- Quiz 2 Container - JS will populate these -->
            <div id="quiz2-container" class="quiz-container">
                <h4>Debt & Credit Awareness</h4>
                <div id="quiz2-question" class="quiz-question">
                     <!-- JS will insert Q2 text here -->
                </div>
                <div id="quiz2-options" class="quiz-options">
                    <!-- JS will insert Q2 options here -->
                </div>
                <div id="quiz2-feedback" class="quiz-feedback" style="display: none;"></div>
                <button id="quiz2-next" class="cta-button small quiz-next-btn" style="display: none;">Next Question</button>
                 <div id="quiz2-results" class="quiz-results" style="display: none;"></div>
            </div>
         </div>

      </div>
    </section>

    <!-- IV. Personal Finance Coaching (Content Reintegrated from v1.0.0) -->
    <section id="personal-coaching" class="page-section bg-light">
      <div class="container">
        <h2>Get Personalized Guidance</h2>
        <p class="section-description">Work one-on-one with our expert coaches to develop a customized financial plan and build lasting healthy habits.</p>

         <!-- Reintegrated Coaching Content -->
        <div class="coaching-content">
            <!-- Column 1: Details -->
            <div class="coaching-details">
                <div class="coaching-item">
                     <!-- Optional: Add new image or keep placeholder concept -->
                     <div class="card-image" style="margin-bottom: var(--spacing-md); border-radius: var(--border-radius);"> <!-- Re-use card image style -->
                        <img src="assets/images/coaching-placeholder.jpg" alt="Financial coach discussing plans with a client" loading="lazy">
                    </div>
                    <h3>What is Financial Coaching?</h3>
                    <p>It's an educational partnership focused on empowering you. We help you understand your finances, set clear goals, and develop skills for effective money management. Facing financial challenges doesn't mean you're "bad" with moneyâ€”it often means guidance can help you use it as a tool for a better life.</p>
                </div>
                <div class="coaching-item">
                    <h3>How It Helps</h3>
                    <p>Our coaches provide support with:</p>
                    <ul>
                        <li>Creating actionable debt management strategies</li>
                        <li>Building realistic budgets and savings plans</li>
                        <li>Navigating Nigerian financial complexities (inflation, multiple incomes)</li>
                        <li>Improving financial habits for long-term success</li>
                        <li>Gaining confidence and reducing financial stress</li>
                    </ul>
                </div>
             </div>
            <!-- Column 2: Form -->
            <div class="coaching-item">
                <h3>Schedule a Discovery Call</h3>
                <p>Ready for personalized support? Fill out the form below, and we'll contact you to schedule a free 15-minute discovery call to discuss how our coaching can help you achieve your financial goals.</p>
                <!-- Replace # with your actual form handler URL/script -->
                <form class="coaching-request-form" action="#" method="POST">
                    <label for="coach-name">Name:</label>
                    <input type="text" id="coach-name" name="name" required placeholder="Your Full Name">

                    <label for="coach-email">Email:</label>
                    <input type="email" id="coach-email" name="email" required placeholder="your.email@example.com">

                    <label for="coach-phone">Phone Number: (Optional)</label> <!-- Added phone number -->
                    <input type="tel" id="coach-phone" name="phone" placeholder="e.g. 08012345678">

                    <label for="coach-interest">What financial area are you most interested in improving? (Optional)</label>
                    <textarea id="coach-interest" name="interest" rows="4" placeholder="E.g., Budgeting, Saving, Debt, Investing Basics..."></textarea>

                    <button type="submit" class="btn">Request Discovery Call</button> <!-- Use new button style -->
                     <p style="font-size: 0.8rem; text-align: center; margin-top: var(--spacing-md); color: var(--color-text-light);">We'll respond within 1 business day.</p>
                </form>
            </div>
        </div>

         <!-- Reintegrated Disclaimer -->
        <div class="disclaimer">
          <p><strong>Disclaimer:</strong> ROFILID provides educational financial coaching. We empower you with knowledge and tools but do not offer specific investment advice or sell financial products. For personalized investment recommendations, please consult a licensed financial advisor.</p>
        </div>

      </div>
    </section>

    <!-- V. Link to MMSBALLIOR (Updated v1.0.1 Structure) -->
     <section class="page-section section-tight">
        <div class="container">
            <div class="mmsballior-promo">
              <div class="promo-content">
                <h3>MMSBALLIOR: Financial Education for Teens</h3>
                <p>Empower the next generation with crucial money skills! MMSBALLIOR is our specialized program teaching teens essential finance concepts (Money Management, Saving, Budgeting, etc.) in an engaging way.</p>
                 <a href="#" class="btn" aria-disabled="true" style="cursor: not-allowed; opacity: 0.6;">Discover MMSBALLIOR (Coming Soon)</a> <!-- Disabled styling added -->
              </div>
              <div class="promo-visual">
                 <!-- Placeholder image - replace with actual -->
                <img src="../assets/images/mmsballior-placeholder.jpg" alt="Teenagers learning about finance in a fun workshop setting" loading="lazy">
              </div>
            </div>
        </div>
     </section>

  </main>

  <!-- Footer Section (Content Reintegrated from v1.0.0) -->
  <footer class="site-footer">
    <div class="container">
        <!-- Page Specific Footer Links (Reintegrated) -->
        <div class="page-footer-links">
            <div class="container">
                <div>
                    <h4>Personal Solutions</h4>
                    <ul>
                        <li><a href="#personal-resources">Resources</a></li>
                        <li><a href="#personal-tools">Tools & Quizzes</a></li>
                        <li><a href="#personal-coaching">Coaching</a></li>
                        <li><a href="#">MMSBALLIOR (Teens)</a></li>
                    </ul>
                </div>
                 <div>
                    <h4>Quick Links</h4>
                     <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="corporate.html">Corporate Solutions</a></li>
                         <li><a href="index.html#services">Our Services</a></li>
                        <li><a href="index.html#contact">Contact Us</a></li>
                    </ul>
                 </div>
                 <div>
                    <h4>Company</h4>
                     <ul>
                         <li><a href="#">About Us</a></li>
                         <li><a href="#">Blog</a></li>
                         <li><a href="#">Privacy Policy</a></li>
                         <li><a href="#">Terms of Service</a></li>
                    </ul>
                 </div>
            </div>
        </div>
        <!-- Standard Footer Content (Reintegrated) -->
        <div class="footer-content">
             <div class="footer-left">
              <div class="logo">
                <a href="index.html" aria-label="Rofilid Home">
                   <!-- Corrected path -->
                  <img src="../assets/images/rofilid-logo-white.svg" alt="Rofilid Logo" width="120" height="40" loading="lazy">
                </a>
              </div>
               <p style="margin-top: var(--spacing-sm); font-size: 0.9rem; color: rgba(255, 255, 255, 0.7);">Empowering financial futures.</p>
            </div>
            <div class="footer-right">
                <p style="margin-bottom: var(--spacing-sm); font-weight: 500;">Connect With Us</p>
              <div class="social-media">
                 <!-- Corrected paths -->
                 <a href="https://facebook.com/rofilid" aria-label="Facebook" class="social-link" target="_blank" rel="noopener noreferrer"><img src="assets/images/facebook.png" alt="Facebook Icon" class="social-icon"></a>
                 <a href="https://instagram.com/rofi.lid" aria-label="Instagram" class="social-link" target="_blank" rel="noopener noreferrer"><img src="assets/images/instagram.png" alt="Instagram Icon" class="social-icon"></a>
                 <a href="https://linkedin.com/company/rofilid" aria-label="LinkedIn" class="social-link" target="_blank" rel="noopener noreferrer"><img src="assets/images/linkedin.png" alt="LinkedIn Icon" class="social-icon"></a>
                 <a href="https://twitter.com/rofilid" aria-label="X (Formerly Twitter)" class="social-link" target="_blank" rel="noopener noreferrer"><img src="assets/images/twitter.png" alt="X (Twitter) Icon" class="social-icon"></a>
                 <!-- Replace yourphonenumber with actual WhatsApp number -->
                 <a href="https://wa.me/234XXXXXXXXXX" aria-label="WhatsApp" class="social-link" target="_blank" rel="noopener noreferrer"><img src="assets/images/whatsapp.png" alt="WhatsApp Icon" class="social-icon"></a>
              </div>
            </div>
        </div>
        <!-- Copyright (Reintegrated) -->
        <div class="copyright">
            <p>Â© <span id="current-year">2024</span> ROFILID Services Limited. All rights reserved.</p>
        </div>
    </div>
  </footer>

  <!-- Combined and Refined Scripts -->
  <script>
    // --- START Quiz Functionality (Preserved from v1.0.0) ---
    const quizzes = {
        quiz1: {
            containerId: 'quiz1-container', questionId: 'quiz1-question', optionsId: 'quiz1-options',
            feedbackId: 'quiz1-feedback', nextBtnId: 'quiz1-next', resultsId: 'quiz1-results',
            currentQuestionIndex: 0, score: 0,
            questions: [
                { question: "What is the primary purpose of a budget?", options: ["To track past spending", "To plan future spending and saving", "To restrict all 'fun' spending", "To calculate taxes"], correctAnswer: 1, explanation: "A budget is primarily a plan for your income, helping you allocate funds for expenses, savings, and goals." },
                { question: "What does 'Inflation' generally mean for your money?", options: ["Your money buys more over time", "The value of goods decreases", "Your money buys less over time", "Interest rates automatically increase"], correctAnswer: 2, explanation: "Inflation is the rate at which the general level of prices for goods and services is rising, reducing the purchasing power of currency." },
                { question: "Which is generally considered a 'good debt'?", options: ["High-interest credit card debt", "A loan for a depreciating asset like a fancy car", "A student loan for valuable education/skills", "Borrowing money for lottery tickets"], correctAnswer: 2, explanation: "'Good debt' typically finances something that can increase your net worth or income potential, like education or a sensible mortgage." },
                { question: "In Nigeria, what is 'BVN'?", options: ["Business Verification Number", "Bank Verification Number", "Basic Value Note", "Billing Validation Nexus"], correctAnswer: 1, explanation: "The Bank Verification Number (BVN) is a unique identifier for Nigerian bank customers, used for security and identity verification." },
                { question: "What is the benefit of an Emergency Fund?", options: ["To invest in high-risk stocks", "To cover unexpected expenses without borrowing", "To pay for planned vacations", "To get discounts on purchases"], correctAnswer: 1, explanation: "An emergency fund provides a financial cushion for unforeseen events like job loss or medical bills, preventing the need for high-interest debt." }
            ]
        },
        quiz2: {
            containerId: 'quiz2-container', questionId: 'quiz2-question', optionsId: 'quiz2-options',
            feedbackId: 'quiz2-feedback', nextBtnId: 'quiz2-next', resultsId: 'quiz2-results',
            currentQuestionIndex: 0, score: 0,
            questions: [
                { question: "What is a 'credit score' primarily used for?", options: ["Calculating your monthly income", "Determining your eligibility for loans and interest rates", "Tracking your spending habits", "Getting discounts at shops"], correctAnswer: 1, explanation: "Lenders use credit scores to assess the risk of lending money, influencing loan approval and interest rates." },
                { question: "Which action is most likely to IMPROVE your creditworthiness?", options: ["Missing loan payments frequently", "Applying for many credit cards at once", "Paying bills consistently on time", "Keeping very high balances on credit cards"], correctAnswer: 2, explanation: "A consistent history of timely payments is a major positive factor for your creditworthiness." },
                { question: "In Nigeria, what does 'Collateral' mean in the context of a loan?", options: ["The interest rate charged", "An asset pledged to secure the loan (e.g., property)", "The loan application fee", "A co-signer for the loan"], correctAnswer: 1, explanation: "Collateral is an asset that a borrower offers as security for a loan. If the borrower defaults, the lender can seize the collateral." },
                { question: "What is the 'Principal' of a loan?", options: ["The total interest paid", "The initial amount of money borrowed", "The monthly payment amount", "The fees associated with the loan"], correctAnswer: 1, explanation: "The principal is the original sum of money borrowed, excluding interest." },
                { question: "Which strategy helps manage multiple debts effectively?", options: ["Ignoring the smallest debts", "Paying only the minimum on all debts", "Using the 'debt snowball' or 'debt avalanche' method", "Taking out more loans to cover payments"], correctAnswer: 2, explanation: "Methods like the snowball (paying smallest first) or avalanche (paying highest interest first) provide structured ways to tackle multiple debts." }
            ]
        }
    };

    function displayQuestion(quizId) {
        const quiz = quizzes[quizId];
        if (!quiz?.questions?.length) return;
        const q = quiz.questions[quiz.currentQuestionIndex];
        if (!q) return;

        const questionEl = document.getElementById(quiz.questionId);
        const optionsEl = document.getElementById(quiz.optionsId);
        const feedbackEl = document.getElementById(quiz.feedbackId);
        const nextBtn = document.getElementById(quiz.nextBtnId);
        const resultsEl = document.getElementById(quiz.resultsId);

        if (!questionEl || !optionsEl || !feedbackEl || !nextBtn || !resultsEl) {
            console.error(`Quiz elements missing for ${quizId}`);
            return;
        }

        questionEl.textContent = `Q${quiz.currentQuestionIndex + 1}: ${q.question}`;
        optionsEl.innerHTML = ''; // Clear previous options
        feedbackEl.style.display = 'none';
        feedbackEl.textContent = ''; // Clear previous feedback text
        nextBtn.style.display = 'none';
        resultsEl.style.display = 'none';
        resultsEl.innerHTML = ''; // Clear previous results

        q.options.forEach((option, index) => {
            const label = document.createElement('label');
            label.setAttribute('data-index', index); // Store index
            const input = document.createElement('input');
            const span = document.createElement('span');
            input.type = 'radio';
            input.name = quizId + '-options';
            input.value = index;
            input.id = `${quizId}-option-${index}`; // Add ID for label association
            label.setAttribute('for', input.id); // Associate label with input

            // Add listener to LABEL instead of INPUT for better click target area
            label.addEventListener('click', () => handleOptionSelection(quizId, index), { once: true }); // Auto-remove listener after one click

            label.appendChild(input);
            span.textContent = ` ${option}`; // Add space before text
            label.appendChild(span);
            optionsEl.appendChild(label);
        });
    }

    function handleOptionSelection(quizId, selectedIndex) {
        // Since the listener is removed after the first click, this function essentially
        // just confirms the selection visually and triggers the feedback.
        const quiz = quizzes[quizId];
        if (!quiz || !quiz.questions[quiz.currentQuestionIndex]) return;

        const optionsEl = document.getElementById(quiz.optionsId);
        const selectedInput = optionsEl.querySelector(`input[value="${selectedIndex}"]`);
        if(selectedInput) selectedInput.checked = true; // Ensure visually checked

        // Disable all radio buttons for this question visually
        optionsEl.querySelectorAll('input[type="radio"]').forEach(input => {
            input.disabled = true;
        });

        showFeedback(quizId, selectedIndex);
    }

    function showFeedback(quizId, selectedIndex) {
        const quiz = quizzes[quizId];
        if (!quiz || !quiz.questions || !quiz.questions[quiz.currentQuestionIndex] || typeof selectedIndex === 'undefined') return;

        const q = quiz.questions[quiz.currentQuestionIndex];
        const feedbackEl = document.getElementById(quiz.feedbackId);
        const nextBtn = document.getElementById(quiz.nextBtnId);
        const optionsEl = document.getElementById(quiz.optionsId);

        if (!feedbackEl || !nextBtn || !optionsEl) return;

        const isCorrect = selectedIndex === q.correctAnswer;
        feedbackEl.innerHTML = `<p><strong>${isCorrect ? 'Correct!' : 'Incorrect.'}</strong> ${q.explanation || ''}</p>`;
        feedbackEl.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`; // Use class to apply styles
        feedbackEl.style.display = 'block';

        if (isCorrect) {
            quiz.score++;
        }

        // Style labels after answer (disabled look, indicate correct/wrong)
        optionsEl.querySelectorAll('label').forEach((label) => {
            const index = parseInt(label.getAttribute('data-index'));
            label.style.cursor = 'default';
            label.style.opacity = '0.7';

            // Highlight correct answer distinctly
            if (index === q.correctAnswer) {
                label.style.borderColor = 'var(--brand-green, #10b981)'; // Use green from page scope or fallback
                label.style.backgroundColor = '#e6f4ea';
                label.style.opacity = '1';
                label.querySelector('span').style.fontWeight = '500'; // Bold correct text slightly
            }
            // Highlight user's incorrect choice if different from correct
            if (index === selectedIndex && !isCorrect) {
                label.style.borderColor = '#f56565'; // Reddish border
                label.style.backgroundColor = '#fde8e8';
            }
            // Fade others more
            if (index !== q.correctAnswer && index !== selectedIndex){
                label.style.opacity = '0.6';
            }
        });

        // Show Next or Results button
        if (quiz.currentQuestionIndex < quiz.questions.length - 1) {
            nextBtn.style.display = 'inline-block';
            // Clear potential old listener and add a fresh one
            const newNextBtn = nextBtn.cloneNode(true);
            nextBtn.parentNode.replaceChild(newNextBtn, nextBtn);
            newNextBtn.addEventListener('click', () => nextQuestion(quizId), { once: true }); // Add fresh listener
        } else {
            showResults(quizId);
        }
    }

    function nextQuestion(quizId) {
        const quiz = quizzes[quizId];
        if (!quiz) return;
        quiz.currentQuestionIndex++;
        if (quiz.currentQuestionIndex < quiz.questions.length) {
            displayQuestion(quizId); // Display the next question
        }
    }

    function showResults(quizId) {
         const quiz = quizzes[quizId];
         if (!quiz) return;
         const resultsEl = document.getElementById(quiz.resultsId);
         const nextBtn = document.getElementById(quiz.nextBtnId);

         if (!resultsEl || !nextBtn) return;
         nextBtn.style.display = 'none'; // Explicitly hide 'Next' button

         resultsEl.innerHTML = `Quiz Complete! Your Score: ${quiz.score} out of ${quiz.questions.length}`; // Use innerHTML
         resultsEl.style.display = 'block';

         // Add restart button dynamically
        if (!resultsEl.querySelector('.quiz-restart-btn')) {
             const restartBtn = document.createElement('button');
             restartBtn.textContent = 'Restart Quiz';
             // Apply relevant classes for styling
             restartBtn.className = 'cta-button small quiz-restart-btn'; // Match quiz button styles
             restartBtn.style.marginTop = 'var(--spacing-lg)'; // Add space above restart
             restartBtn.addEventListener('click', () => restartQuiz(quizId));
             resultsEl.appendChild(restartBtn);
        }
    }

     function restartQuiz(quizId) {
        const quiz = quizzes[quizId];
         if (!quiz) return;
        quiz.currentQuestionIndex = 0;
        quiz.score = 0;
        const resultsEl = document.getElementById(quiz.resultsId);
        // No need to explicitly remove button, innerHTML clear below does it
        if(resultsEl){
            resultsEl.innerHTML = ''; // Clear results content
            resultsEl.style.display = 'none'; // Hide results area
        }

        // Resetting buttons state for the first question
         const nextBtn = document.getElementById(quiz.nextBtnId);
         if(nextBtn) nextBtn.style.display = 'none';


        displayQuestion(quizId); // Display the first question again
    }
    // --- END Quiz Functionality ---


    // --- START Combined Initializations and New Features ---
    document.addEventListener('DOMContentLoaded', () => {

        let headerHeight = 70; // Default value

        // Function to update header height (call on load and resize)
        function updateHeaderHeight() {
           const siteHeader = document.querySelector('.site-header');
           headerHeight = siteHeader?.offsetHeight || 70;
        }

        // 1. Mobile Menu Toggle
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const primaryNav = document.querySelector('#primary-navigation');
        if(mobileMenuToggle && primaryNav) {
            mobileMenuToggle.addEventListener('click', () => {
                const isExpanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';
                mobileMenuToggle.setAttribute('aria-expanded', !isExpanded);
                primaryNav.classList.toggle('active');
                document.body.style.overflow = !isExpanded ? 'hidden' : '';
            });

            // Close menu if clicking outside or scrolling
            document.addEventListener('click', (event) => {
                 if (!primaryNav.contains(event.target) && !mobileMenuToggle.contains(event.target) && primaryNav.classList.contains('active')) {
                     mobileMenuToggle.setAttribute('aria-expanded', 'false');
                     primaryNav.classList.remove('active');
                     document.body.style.overflow = '';
                 }
            });
            window.addEventListener('scroll', () => {
                 if (primaryNav?.classList.contains('active')) {
                     mobileMenuToggle?.setAttribute('aria-expanded', 'false');
                     primaryNav.classList.remove('active');
                     document.body.style.overflow = '';
                 }
            }, { passive: true }); // Use passive listener for scroll performance
        }

        // 2. Template Variant Selection (Optional - if variants are used)
        document.querySelectorAll('.template-variants .variant').forEach(variant => {
            variant.addEventListener('click', function() {
                if (this.classList.contains('active')) return;
                this.parentNode.querySelectorAll('.variant').forEach(sib => sib.classList.remove('active'));
                this.classList.add('active');
                const templateCard = this.closest('.template-card');
                console.log(`Variant ${this.textContent.trim()} selected for ${templateCard?.dataset.template}`);
                // Add logic to change preview/link based on variant
            });
        });

        // 3. Social Carousel Navigation
        const carousels = document.querySelectorAll('.social-carousel');
        carousels.forEach(carousel => {
             let currentIndex = 0;
             const posts = carousel.querySelectorAll('.social-post');
             let intervalId = null;

             function showPost(index) {
                posts.forEach((post, i) => {
                    post.style.display = i === index ? 'block' : 'none';
                });
             }

             function startCarousel() {
                 if (intervalId) clearInterval(intervalId); // Clear existing interval
                 if (posts.length > 1) {
                     intervalId = setInterval(() => {
                         currentIndex = (currentIndex + 1) % posts.length;
                         showPost(currentIndex);
                     }, 6000); // 6 seconds interval
                 }
             }

             if (posts.length > 0) {
                showPost(currentIndex); // Show first post initially
                startCarousel(); // Start auto-advance
             }
        });

        // 4. Stats Counter Animation
        const statObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const statCard = entry.target;
                    const targetSpan = statCard.querySelector('.stat-target');
                    const displayEl = statCard.querySelector('h4');
                    const suffix = (displayEl.textContent.includes('%') ? '%' : '') || (displayEl.textContent.includes('+') ? '+' : '');
                    const isPercent = suffix === '%';

                    if (!targetSpan || !displayEl || displayEl.classList.contains('counted')) {
                        observer.unobserve(statCard); return;
                    }

                    const target = parseInt(targetSpan.textContent, 10);
                    if (isNaN(target)) { observer.unobserve(statCard); return; }

                    let currentCount = 0;
                    const duration = 1500;
                    const frameDuration = 1000 / 60; // 60 FPS approx
                    const totalFrames = Math.round(duration / frameDuration);
                    const increment = target / totalFrames;

                    const animateCount = () => {
                        currentCount += increment;
                        if (currentCount < target) {
                            displayEl.textContent = Math.ceil(currentCount).toLocaleString() + suffix;
                            requestAnimationFrame(animateCount);
                        } else {
                            displayEl.textContent = target.toLocaleString() + suffix;
                            displayEl.classList.add('counted');
                        }
                    };
                    requestAnimationFrame(animateCount); // Start animation
                    observer.unobserve(statCard); // Unobserve once triggered
                }
            });
        }, { threshold: 0.4 }); // Trigger when 40% visible

        document.querySelectorAll('.stat-card').forEach(card => {
            statObserver.observe(card);
        });


        // 5. Smooth Scroll Logic (Handles same-page and cross-page with session storage)
        function smoothScrollTo(targetElement) {
             updateHeaderHeight(); // Ensure header height is current
             const elementPosition = targetElement.getBoundingClientRect().top;
             const offsetPosition = elementPosition + window.pageYOffset - headerHeight;
             window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
        }

        // Same-page links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
             anchor.addEventListener('click', function (e) {
                 const targetId = this.getAttribute('href');
                 // Check it's a valid hash longer than just '#'
                 if (targetId && targetId.length > 1 && targetId.startsWith('#')) {
                     try { // Use try-catch for complex selectors
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                             e.preventDefault();
                             smoothScrollTo(targetElement);
                        } else {
                             console.warn("Smooth scroll target not found:", targetId);
                        }
                     } catch (err) {
                         console.error("Invalid selector for smooth scroll:", targetId, err);
                     }
                 }
             });
         });

         // Links potentially going to another page or current page section
         // Uses session storage ONLY if going to a different page
        document.querySelectorAll('a[href*="#"]').forEach(anchor => {
            try {
                const url = new URL(anchor.href); // Check if URL parsing is valid
                const targetId = url.hash;

                 // Check if it's only a hash (same page) or points to the current page
                const isSamePageLink = (url.pathname === window.location.pathname || anchor.pathname === window.location.pathname || anchor.getAttribute('href').startsWith('#')) && targetId.length > 1;


                if (!isSamePageLink) {
                    // It's a cross-page link
                    anchor.addEventListener('click', function (e) {
                         if (targetId) {
                            // Don't prevent default, let browser navigate, but store hash
                            sessionStorage.setItem('scrollToId', targetId);
                            // Note: Default browser navigation will occur.
                            // We rely on the page load logic below to handle the scroll.
                         }
                    });
                } else {
                     // It's a same-page link (handled by the # selector listener above),
                     // no extra listener needed here. Or, add specific handling if structure differs.
                }
            } catch (e) {
                // console.log("Skipping potentially invalid link for scroll logic:", anchor.href, e);
                 // This often catches mailto: or tel: links, which is fine.
            }
        });

        // On Page Load: Check for stored hash or existing hash and scroll
        function handlePageLoadScroll() {
             updateHeaderHeight();
             const storedTargetId = sessionStorage.getItem('scrollToId');
             const currentHash = window.location.hash;
             let targetIdToScroll = null;

             if (storedTargetId && storedTargetId.length > 1) {
                 targetIdToScroll = storedTargetId;
                 sessionStorage.removeItem('scrollToId'); // Clear after use
             } else if (currentHash && currentHash.length > 1) {
                 targetIdToScroll = currentHash;
             }

             if (targetIdToScroll) {
                  try {
                    const targetElement = document.querySelector(targetIdToScroll);
                    if (targetElement) {
                        // Use timeout to allow layout settlement after load/navigation
                        setTimeout(() => {
                            smoothScrollTo(targetElement);
                            // Optionally, remove the hash from URL after scrolling
                            // history.replaceState(null, null, ' ');
                         }, 150); // Adjust timeout if needed
                    } else {
                        console.warn("Target element not found on load for ID:", targetIdToScroll);
                    }
                 } catch(err) {
                    console.error("Invalid selector from storage/hash:", targetIdToScroll, err);
                 }
             }
        }
        handlePageLoadScroll(); // Execute scroll check on load


        // 6. Initialize Quizzes
        if (document.getElementById('quiz1-container')) { displayQuestion('quiz1'); }
        if (document.getElementById('quiz2-container')) { displayQuestion('quiz2'); }

        // 7. Update Footer Year
        const currentYearSpan = document.getElementById('current-year');
        if(currentYearSpan) { currentYearSpan.textContent = new Date().getFullYear(); }

         // 8. Call initial update for header height
         updateHeaderHeight();
         // Optional: Re-check header height on resize if it can change dynamically
         window.addEventListener('resize', updateHeaderHeight, { passive: true });

        console.log("ROFILID Personal Page v1.0.1 Initialized");

    });
    // --- END Combined Initializations ---
  </script>

</body>
</html>
