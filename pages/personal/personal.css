/**
 * ROFILID Personal Page Styles
 * Version: 2.7.1 (Enhanced Responsiveness & Color Fixes - FULL)
 * Description: Optimized styles focusing on fluidity, performance, accessibility,
 *              and addressing specific feedback on colors and spacing.
 */

/* --- Base Resets & Defaults --- */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html {
  scroll-behavior: smooth;
  font-size: 100%; /* Base for rem units */
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: var(--pp-font-family, 'Inter', sans-serif);
  line-height: 1.6;
  color: var(--pp-color-text, #1e293b);
  background-color: var(--pp-color-background, #f8fcfc);
  /* Consider removing overflow-x:hidden and fixing the root cause of scroll */
  /* overflow-x: hidden; */
  position: relative; /* For positioning context (e.g., blurs) */
  min-block-size: 100vh; /* Use logical property */
}

/* Basic element defaults */
img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  max-inline-size: 100%; /* Logical property */
  block-size: auto; /* Logical property */
  object-fit: cover; /* Add a sensible default */
}

a {
  color: var(--pp-color-primary, #0c343d);
  text-decoration: none;
  transition: color var(--pp-transition-fast);
}

a:hover,
a:focus-visible { /* Combine hover/focus where applicable */
  color: var(--pp-color-primary-light, #1a4652);
  text-decoration: underline;
}

a:focus { outline: none; } /* Rely on focus-visible */

:focus-visible {
  outline: 3px solid var(--pp-color-primary-light, #1a4652);
  outline-offset: 2px;
  /* Using a more subtle shadow for general focus */
  box-shadow: 0 0 0 3px rgba(12, 52, 61, 0.15);
  border-radius: 3px;
}

/* Specific focus styles */
.modal-close-btn:focus-visible,
.social-link:focus-visible {
    box-shadow: none;
    outline-offset: 1px;
    outline-width: 2px;
}

/* --- IMPORTANT: Ensure custom button/input focus provides sufficient visual indication --- */
/* Focus styles re-established with box-shadow */
.btn:focus-visible,
.form-group input:focus-visible,
.form-group select:focus-visible,
.form-group textarea:focus-visible {
     outline: none;
     /* Re-applying a stronger shadow as the primary indicator */
     box-shadow: var(--pp-box-shadow-inset, inset 0 1px 2px rgba(0,0,0,0.05)), /* Combine inset */
                 0 0 0 3px var(--pp-color-primary-focus-ring, rgba(12, 52, 61, 0.25));
}
.btn-primary:focus-visible {
    box-shadow: var(--pp-box-shadow, 0 4px 12px rgba(0, 0, 0, 0.07)), /* Add back button shadow */
                0 0 0 3px var(--pp-color-green-focus-ring, rgba(40, 167, 69, 0.4));
}
.btn-outline:focus-visible {
    /* Outline only needs ring, no button shadow */
    box-shadow: 0 0 0 3px var(--pp-color-primary-focus-ring, rgba(12, 52, 61, 0.25));
}
.btn-secondary:focus-visible {
    box-shadow: var(--pp-box-shadow, 0 4px 12px rgba(0, 0, 0, 0.07)), /* Add back button shadow */
                0 0 0 3px var(--pp-color-primary-focus-ring, rgba(12, 52, 61, 0.25));
}
/* Validation focus states */
.form-group input:focus-visible:not(.is-invalid),
.form-group select:focus-visible:not(.is-invalid),
.form-group textarea:focus-visible:not(.is-invalid) {
     border-color: var(--pp-color-primary); /* Maintain border color feedback */
}
.form-group input.is-invalid:focus-visible,
.form-group select.is-invalid:focus-visible,
.form-group textarea.is-invalid:focus-visible {
     border-color: var(--pp-color-danger-dark) !important;
     box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.25) !important; /* Red ring */
}


ul, ol {
  list-style: none;
  padding-inline-start: 0; /* Logical property */
}

h1, h2, h3, h4, h5, h6 {
  font-weight: var(--pp-font-bold, 700);
  line-height: 1.3;
  color: var(--pp-color-primary-heading, #0c343d);
  margin-block-end: var(--pp-space-lg, 1.5rem); /* Logical property */
  word-break: break-word;
  overflow-wrap: break-word;
}

p {
  margin-block-end: var(--pp-space-md, 1rem); /* Logical property */
  color: var(--pp-color-text-light, #475569);
  line-height: 1.65;
  max-inline-size: 65ch; /* Logical property for readability */
}

*:not(.section-description) > p:last-child,
ul > li:last-child > p {
    margin-block-end: 0;
}

.section-description {
    margin-block-end: var(--pp-space-xxl);
    max-inline-size: 700px; /* Adjusted max-width */
    margin-inline: auto; /* Logical property for centering */
    font-size: clamp(1rem, 1.8vw + 0.5rem, 1.15rem); /* Adjusted fluid size */
    line-height: 1.7;
    text-align: center;
    color: var(--pp-color-text-light);
}

/* --- Utility Classes --- */
.container {
  max-inline-size: 1200px; /* Logical property */
  margin-inline: auto; /* Logical property */
  /* Fluid padding */
  padding-inline: clamp(var(--pp-space-md), 4vw, var(--pp-space-lg));
}

/* Screen Reader Only */
.sr-only {
  position: absolute;
  width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0;
}

.bg-light { background-color: var(--pp-color-light, #f1f5f9); }
.bg-light-accent { background-color: var(--pp-color-light-accent, #e0f7fa); }

.link-inline {
    color: var(--pp-color-green, #28a745);
    text-decoration: underline;
    font-weight: var(--pp-font-medium, 500);
}
.link-inline:hover, .link-inline:focus-visible {
    color: var(--pp-color-green-dark, #1f7d36);
    text-decoration: none;
}

.highlight {
    color: var(--pp-color-green, #28a745);
    font-weight: var(--pp-font-semibold, 600);
}

[hidden] { display: none !important; }

/* --- Personal Page Scope & Variables --- */
:root {
  /* Colors */
  --pp-color-primary: #0c343d;
  --pp-color-primary-light: #1a4652;
  --pp-color-primary-dark: #072329;
  --pp-color-green: #28a745;
  --pp-color-green-dark: #1f7d36;
  --pp-color-secondary: #ffffff; /* Explicit White */
  --pp-color-background: #f8fcfc;
  --pp-color-light-accent: #e0f7fa;
  --pp-color-light: #f1f5f9;
  --pp-color-text: #1e293b;
  --pp-color-text-light: #475569;
  --pp-color-text-lighter: #64748b;
  --pp-color-primary-heading: var(--pp-color-primary);
  --pp-color-border: #cbd5e1;
  --pp-color-border-light: #e2e8f0;
  --pp-color-success: var(--pp-color-green);
  --pp-color-success-dark: var(--pp-color-green-dark);
  --pp-color-success-light: #f0fdf4;
  --pp-color-danger: #dc3545;
  --pp-color-danger-dark: #b02a37;
  --pp-color-danger-light: #fef2f2;
  --pp-color-overlay-bg: rgba(12, 52, 61, 0.9);

  /* Focus Rings */
  --pp-color-primary-focus-ring: rgba(12, 52, 61, 0.25);
  --pp-color-green-focus-ring: rgba(40, 167, 69, 0.4);

  /* Footer Specific */
  --pp-color-footer-text: #cbd5e1;
  --pp-color-footer-link: #e2e8f0;
  --pp-color-footer-link-hover: #ffffff;
  --pp-color-footer-copyright: #a0aec0;

  /* Buttons */
  --pp-color-text-on-btn: var(--pp-color-primary); /* Default text color */

  /* Layout & Spacing */
  --pp-border-radius: 6px;
  --pp-border-radius-large: 10px;
  --pp-box-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
  --pp-box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
  --pp-box-shadow-lg: 0 8px 25px rgba(12, 52, 61, 0.12);
  --pp-box-shadow-inset: inset 0 1px 2px rgba(0,0,0,0.05);
  --pp-transition-fast: 0.2s ease-out;
  --pp-transition-medium: 0.3s ease-out;
  --pp-transition-slow: 0.5s ease-out;

  /* Spacing Scale (Revised Clamp) */
  --pp-space-xs: 0.25rem;  /* 4px */
  --pp-space-sm: 0.5rem;   /* 8px */
  --pp-space-md: 1rem;     /* 16px */
  --pp-space-lg: 1.5rem;   /* 24px */
  --pp-space-xl: clamp(1.8rem, 3vw + 1rem, 2.5rem);
  --pp-space-xxl: clamp(2.8rem, 5vw + 1rem, 4rem);
  --pp-space-xxxl: clamp(4rem, 7vw + 1.5rem, 5.5rem);
  --pp-space-xxxxl: clamp(5rem, 9vw + 1.5rem, 7rem);

  /* Font Weights */
  --pp-font-regular: 400;
  --pp-font-medium: 500;
  --pp-font-semibold: 600;
  --pp-font-bold: 700;
  --pp-font-extrabold: 800;

  /* Header Height */
  --pp-header-height: 70px;
  --pp-header-height-intermediate: 60px;

  /* Font Family */
   --pp-font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

/* --- Header Styles --- */
.site-header {
    position: sticky;
    inset-block-start: 0; inset-inline-start: 0; inline-size: 100%;
    z-index: 1000;
    block-size: var(--pp-header-height);
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-block-end: 1px solid var(--pp-color-border-light);
    box-shadow: var(--pp-box-shadow-sm);
    /* Add height transition */
    transition: background-color var(--pp-transition-medium),
                box-shadow var(--pp-transition-medium),
                block-size var(--pp-transition-fast) ease-out;
}
.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    inline-size: 100%;
    gap: var(--pp-space-md);
}
.logo img {
    block-size: 30px; inline-size: auto; max-inline-size: 150px;
    display: block; object-fit: contain; vertical-align: middle;
}
nav[aria-label="Main navigation"] {
    display: flex; align-items: center;
}
/* Desktop Navigation */
.nav-list { display: flex; gap: var(--pp-space-lg); align-items: center; }
.nav-link {
    display: block;
    padding-block: var(--pp-space-sm); padding-inline: var(--pp-space-md);
    color: var(--pp-color-primary);
    font-weight: var(--pp-font-medium);
    border-block-end: 3px solid transparent;
    transition: color var(--pp-transition-fast),
                border-color var(--pp-transition-fast),
                background-color var(--pp-transition-fast);
    white-space: nowrap; border-start-start-radius: 4px; border-start-end-radius: 4px;
    position: relative;
}
.nav-link::after { /* Underline effect */
    content: ''; position: absolute; inset-block-end: 0; inset-inline: 0;
    block-size: 3px; background-color: var(--pp-color-green);
    transform: scaleX(0); transform-origin: center;
    transition: transform var(--pp-transition-fast);
}
.nav-link:hover::after,
.nav-link:focus-visible::after { transform: scaleX(1); }
.nav-link:hover {
    color: var(--pp-color-primary-dark); text-decoration: none;
    background-color: var(--pp-color-light); /* Contrast OK */
}
.nav-link:focus-visible { /* Focus ring + underline is enough */
     color: var(--pp-color-primary-dark); text-decoration: none;
}
.nav-link.active-page,
.nav-link[aria-current="page"] {
    color: var(--pp-color-primary-dark); font-weight: var(--pp-font-semibold);
}
.nav-link.active-page::after,
.nav-link[aria-current="page"]::after {
    transform: scaleX(1); background-color: var(--pp-color-green);
}
.nav-link.active-page:hover,
.nav-link[aria-current="page"]:hover { background-color: transparent; }

/* Mobile Nav Toggle */
.mobile-menu-toggle { display: none; background: transparent; border: none; color: var(--pp-color-primary); font-size: 1.8rem; cursor: pointer; padding: var(--pp-space-sm); line-height: 1; z-index: 1100; }
.mobile-menu-toggle .close-icon { display: none; }
.mobile-menu-toggle .open-icon { display: block; }
.mobile-menu-toggle[aria-expanded="true"] .close-icon { display: block; }
.mobile-menu-toggle[aria-expanded="true"] .open-icon { display: none; }

/* Mobile Navigation Styles */
@media (max-width: 767px) {
    .header-container { gap: var(--pp-space-sm); }
    .logo { order: 1; }
    nav[aria-label="Main navigation"] { order: 3; margin-inline-start: 0; }
    .mobile-menu-toggle { display: block; order: 2; margin-inline-start: auto; }
    .nav-list { display: none; }

    #primary-navigation.active { /* Style the opened mobile nav container */
        display: flex; flex-direction: column;
        position: absolute;
        inset-block-start: var(--pp-header-height); /* Use variable */
        inset-inline: 0;
        background-color: var(--pp-color-secondary);
        box-shadow: var(--pp-box-shadow-lg);
        border-block-start: 1px solid var(--pp-color-border-light);
        max-block-size: calc(100vh - var(--pp-header-height));
        overflow-y: auto; padding-block: var(--pp-space-md) 0; z-index: 1050;
        opacity: 1; transform: translateY(0) scaleY(1); visibility: visible;
        transition: opacity var(--pp-transition-medium), transform var(--pp-transition-medium);
        gap: 0;
    }
    .nav-item { inline-size: 100%; }
    .nav-link {
        padding-block: var(--pp-space-md);
        padding-inline: var(--pp-space-xl); /* Sufficient inline padding */
        text-align: start; border-block-end: 1px solid var(--pp-color-border-light);
        border-inline-start: 4px solid transparent; inline-size: 100%; border-radius: 0;
        font-size: 1.05rem;
    }
    .nav-link::after { display: none; }
    .nav-item:last-child .nav-link { border-block-end: none; }
    .nav-link:hover, .nav-link:focus-visible {
        background-color: var(--pp-color-light);
        border-inline-start-color: var(--pp-color-border);
        color: var(--pp-color-primary-dark);
        padding-inline-start: calc(var(--pp-space-xl) - 4px); /* Adjust for border */
        text-decoration: none;
    }
    .nav-link.active-page, .nav-link[aria-current="page"] {
        background-color: var(--pp-color-light-accent);
        border-inline-start-color: var(--pp-color-green);
        color: var(--pp-color-primary-dark);
        padding-inline-start: calc(var(--pp-space-xl) - 4px);
    }
}

/* --- Main Content & Section Spacing --- */
main { /* Spacing handled by sections */ }
#main-content > section,
#main-content > aside.motivational-quote {
    padding-block: var(--pp-space-xxxl); /* Fluid spacing */
    border-block-end: 1px solid var(--pp-color-border-light);
    overflow: hidden;
}
#main-content > section:last-of-type,
#main-content > aside.motivational-quote:last-of-type {
    border-block-end: none;
}
.section-padding--large { padding-block: var(--pp-space-xxxxl); }
.section-tight { padding-block: var(--pp-space-xl); }
#hero { padding-block-start: var(--pp-space-xxxl); padding-block-end: var(--pp-space-xxxxl); }


/* --- Button Styles --- */
.btn {
    display: inline-flex; align-items: center; justify-content: center;
    gap: var(--pp-space-sm);
    padding-block: 12px; padding-inline: 26px;
    border-radius: var(--pp-border-radius); font-weight: var(--pp-font-semibold);
    border: 1px solid transparent; cursor: pointer; text-align: center;
    font-size: 1rem; line-height: 1.5; white-space: nowrap;
    box-shadow: var(--pp-box-shadow-sm);
    text-decoration: none !important;
    /* Explicitly define base text color (can be overridden by variants) */
    color: var(--pp-color-text-on-btn, var(--pp-color-primary));
    transition: transform var(--pp-transition-medium),
                box-shadow var(--pp-transition-medium),
                background-color var(--pp-transition-medium),
                border-color var(--pp-transition-medium),
                color var(--pp-transition-medium);
}
.btn:hover, .btn:focus-visible {
    transform: translateY(-2px);
    box-shadow: var(--pp-box-shadow);
}
.btn:active { transform: translateY(0px); box-shadow: var(--pp-box-shadow-inset); }

.btn i { color: currentColor; flex-shrink: 0; }

/* Variants with Explicit Colors */
.btn-primary { background-color: var(--pp-color-green); border-color: var(--pp-color-green); color: var(--pp-color-secondary, #ffffff); }
.btn-primary:hover, .btn-primary:focus-visible { background-color: var(--pp-color-green-dark); border-color: var(--pp-color-green-dark); color: var(--pp-color-secondary, #ffffff); }

.btn-outline { background-color: transparent; color: var(--pp-color-primary); border: 1px solid var(--pp-color-primary); box-shadow: none; }
.btn-outline:hover, .btn-outline:focus-visible { background-color: var(--pp-color-light-accent); color: var(--pp-color-primary-dark); border-color: var(--pp-color-primary-dark); }
.btn-outline:hover { box-shadow: none; } /* Remove shadow lift on outline hover */
.btn-outline:active { background-color: var(--pp-color-light-accent); color: var(--pp-color-primary-dark); transform: translateY(0px); box-shadow: var(--pp-box-shadow-inset); }

.btn-secondary { background-color: var(--pp-color-primary); border-color: var(--pp-color-primary); color: var(--pp-color-secondary, #ffffff); }
.btn-secondary:hover, .btn-secondary:focus-visible { background-color: var(--pp-color-primary-light); border-color: var(--pp-color-primary-light); color: var(--pp-color-secondary, #ffffff); }

/* Size overrides */
.btn.small { padding-block: 8px; padding-inline: 18px; font-size: 0.9rem; }
.btn.large { padding-block: 14px; padding-inline: 32px; font-size: 1.1rem; }
/* Icon animations */
.btn-icon i { transition: transform var(--pp-transition-fast); }
.btn span { line-height: inherit; }
.btn-icon:hover i.fa-arrow-right, .btn-icon:focus-visible i.fa-arrow-right { transform: translateX(4px); }
.btn-icon:hover i.fa-play, .btn-icon:focus-visible i.fa-play { transform: scale(1.15); }
.btn-icon:hover i.fa-download, .btn-icon:focus-visible i.fa-download { transform: translateY(2px); }
.btn-icon:hover i:not(.fa-arrow-right):not(.fa-play):not(.fa-download),
.btn-icon:focus-visible i:not(.fa-arrow-right):not(.fa-play):not(.fa-download) { transform: rotate(-5deg) scale(1.05); }

/* Disabled state - Contrast checked */
.btn:disabled, .btn[disabled], .btn[aria-disabled="true"] { /* styles ok */ }
.btn-outline:disabled, .btn-outline[disabled], .btn-outline[aria-disabled="true"] { /* styles ok */ }


/* --- Section Titles & Descriptions --- */
.section-title {
    text-align: center; margin-block-end: var(--pp-space-lg);
    font-size: clamp(1.8rem, 4vw + 0.5rem, 2.8rem);
    color: var(--pp-color-primary-heading);
    font-weight: var(--pp-font-bold); position: relative;
    padding-block-end: var(--pp-space-md); line-height: 1.3;
}
.section-title::after {
    content: ''; position: absolute; inset-block-end: 0; inset-inline-start: 50%;
    transform: translateX(-50%); inline-size: 60px; block-size: 4px;
    background-color: var(--pp-color-green); border-radius: 2px;
}


/* --- Hero Section --- */
.hero-section { /* background OK */ }
.hero-container {
    display: grid; grid-template-columns: 1fr; /* Mobile: Stack */
    gap: var(--pp-space-xl); /* Fluid gap */
    align-items: center; position: relative; z-index: 1;
}
@media (min-width: 768px) {
    .hero-container {
        grid-template-columns: repeat(auto-fit, minmax(min(100%, 380px), 1fr)); /* Adjusted min */
        align-items: start; text-align: start;
        gap: var(--pp-space-xxxl);
    }
    .hero-content { text-align: start; }
    .hero-content .subheadline { margin-inline: 0; max-inline-size: 550px; }
    .hero-actions { justify-content: flex-start; }
}
.hero-content { text-align: center; } /* Mobile */
.hero-badge { /* ... */ }
.hero-content h1 { font-size: clamp(2.2rem, 5.5vw + 0.5rem, 3.5rem); /* ... */ }
.subheadline { font-size: clamp(1.05rem, 2.5vw + 0.5rem, 1.3rem); /* ... */ }
.hero-actions { display: flex; flex-wrap: wrap; gap: var(--pp-space-md); justify-content: center; }
@media (min-width: 768px) { .hero-actions { gap: var(--pp-space-lg); } }
/* Hero Stats Grid */
.hero-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 200px), 1fr)); /* Fluid */
    gap: clamp(var(--pp-space-md), 3vw, var(--pp-space-xl)); /* Fluid */
}
.stat-card { /* ... */ }
.stat-card p { /* Removed redundant max-inline-size: none; */ }


/* --- Approach Section --- */
.approach-container { /* ... */ }
.approach-highlights { /* ... */ }

/* --- Resource/Category/Template Grids --- */
.resource-grid, .category-grid, .template-grid {
    display: grid;
    gap: clamp(var(--pp-space-lg), 4vw, var(--pp-space-xl)); /* Fluid Gap */
}
.resource-grid { grid-template-columns: repeat(auto-fit, minmax(min(100%, 290px), 1fr)); }
.category-grid { grid-template-columns: repeat(auto-fit, minmax(min(100%, 220px), 1fr)); }
.template-grid { grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr)); }

.resource-card, .category-card, .template-card {
    background-color: var(--pp-color-secondary); border-radius: var(--pp-border-radius-large);
    box-shadow: var(--pp-box-shadow); border: 1px solid var(--pp-color-border-light);
    overflow: hidden; display: flex; flex-direction: column;
    transition: transform var(--pp-transition-medium), box-shadow var(--pp-transition-medium);
}
.resource-card:hover, .category-card:hover, .template-card:hover,
.resource-card:focus-within, .category-card:focus-within, .template-card:focus-within {
     transform: translateY(-5px); box-shadow: var(--pp-box-shadow-lg);
}

/* Card Internals */
.card-image, .template-preview { overflow: hidden; } /* Shared */
.card-image { aspect-ratio: 16 / 10; border-block-end: 1px solid var(--pp-color-border-light); }
.template-preview { position: relative; background-color: var(--pp-color-light); aspect-ratio: 4 / 3; border-block-end: 1px solid var(--pp-color-border-light); }
.card-image img { inline-size: 100%; block-size: 100%; object-fit: cover; transition: transform var(--pp-transition-slow); }
.resource-card:hover .card-image img, .resource-card:focus-within .card-image img { transform: scale(1.05); }
/* Template hover images */
.template-image { position: absolute; inset: 0; inline-size: 100%; block-size: 100%; object-fit: cover; object-position: center; transition: opacity var(--pp-transition-medium) ease-in-out; backface-visibility: hidden; }
.template-image-default { opacity: 1; z-index: 1; }
.template-image-hover { opacity: 0; z-index: 2; }
.template-card:hover .template-image-default, .template-card:focus-within .template-image-default { opacity: 0; }
.template-card:hover .template-image-hover, .template-card:focus-within .template-image-hover { opacity: 1; }

.card-content, .category-card > *, .template-details { /* Content wrapper for non-category */
    padding: clamp(var(--pp-space-md), 3vw, var(--pp-space-lg));
}
.card-content, .template-details { display: flex; flex-direction: column; flex-grow: 1; }
/* Category card elements are centered, use direct children */
.category-card { padding: clamp(var(--pp-space-md), 3vw, var(--pp-space-lg)); text-align: center; align-items: center; }

.card-content h3 { /* Styles */ }
.category-card h4 { /* Styles */ }
.template-details h3 { /* Styles */ }
.card-content p, .template-details p:not(.template-price-note) { /* styles */ flex-grow: 1; }
.category-card p { flex-grow: 1; margin-block-end: var(--pp-space-lg); inline-size: 100%; /* Prevent shrink */ max-inline-size: none; font-size: 0.9rem; }
.card-cta, .template-actions, .category-card .btn { margin-block-start: auto; /* Push to bottom */ }
.card-cta { padding-block-start: var(--pp-space-lg); border-block-start: 1px solid var(--pp-color-border-light); }
.template-actions { padding-block-start: var(--pp-space-lg); border-block-start: 1px solid var(--pp-color-border-light); display: flex; flex-direction: column; gap: var(--pp-space-sm); }
.card-cta .btn { inline-size: 100%; font-size: 0.95rem; }
.template-actions .btn { inline-size: 100%; font-size: 0.9rem; padding: 10px 16px; }
.template-price-note { font-size: 0.8rem; color: var(--pp-color-text-lighter); text-align: center; margin-block-start: var(--pp-space-sm); margin-block-end: 0; max-inline-size: none; }
.category-card .btn { inline-size: 100%; max-inline-size: 200px; padding: 10px 20px; font-size: 0.95rem; }

/* --- Social Integration Card --- */
.social-integration .card-header { /* styles ok */ }
.social-integration .card-content { padding-block-start: 0; }
.social-integration .social-intro { /* styles */ }
.social-feed-preview { /* styles ok */ }
.social-post-preview { /* styles ok */ }
.social-follow-links { /* styles ok */ }
.social-icons-inline { /* styles ok */ }

/* --- Motivational Quotes --- */
/* styles ok, contrast handled by primary dark/light accent bgs */

/* --- Learning Hub / Full Challenge Link --- */
.full-challenge-link { text-align: center; margin-block-start: var(--pp-space-xxxl); }


/* --- Interest Calculator Promo Section --- */
/* styles seem okay, use logical props, check list item color */
.calculator-features-list li { color: var(--pp-color-text); /* Ensure sufficient contrast */ }


/* --- Coaching Section --- */
/* styles seem okay */


/* --- Shared Form Styles --- */
/* styles seem okay, focus states adjusted above */
.form-group { margin-block-end: var(--pp-space-lg); }
.form-group label:not(.checkbox-label) { display: block; font-weight: var(--pp-font-medium); margin-block-end: var(--pp-space-sm); color: var(--pp-color-text); font-size: 0.95rem; }
.form-group input[type="text"], .form-group input[type="email"], .form-group select, .form-group textarea { /* styles ok */ }
.form-group select { /* arrow style ok */ }
.form-group textarea { resize: vertical; min-block-size: 100px; }
.form-group .form-error-msg { display: block; color: var(--pp-color-danger); font-size: 0.85rem; margin-block-start: var(--pp-space-sm); font-weight: var(--pp-font-medium); min-block-size: 1.1em; }
.form-group input.is-invalid, .form-group select.is-invalid, .form-group textarea.is-invalid { border-color: var(--pp-color-danger); background-color: var(--pp-color-danger-light); }

/* --- MMISBALIOR Promo Section --- */
/* styles seem okay */


/* --- Feedback Section --- */
/* styles seem okay */


/* --- Shared Modal Styles --- */
.modal-overlay { /* ... layout ... */ transition: opacity var(--pp-transition-medium) ease, visibility 0s var(--pp-transition-medium) linear; }
.modal-overlay:not([hidden]) { opacity: 1; visibility: visible; transition-delay: 0s; }
.modal-content { /* bg white */ padding: clamp(var(--pp-space-lg), 5vw, var(--pp-space-xl)); }
.modal-close-btn { /* positioning, styles */ }


/* --- Quiz Modal --- */
.quiz-modal-content { /* base */ }
.quiz-modal-progress { margin-block-end: var(--pp-space-lg); color: var(--pp-color-text-light); font-size: 0.95rem; }
.quiz-modal-question-area {
    margin-block-end: var(--pp-space-xl); color: var(--pp-color-text);
    font-size: clamp(1.05rem, 2vw + 0.6rem, 1.25rem); text-align: center;
    padding-inline: var(--pp-space-sm);
}
.quiz-modal-question-area .question-number { color: var(--pp-color-primary); margin-inline-end: var(--pp-space-sm); font-weight: var(--pp-font-semibold); }
.quiz-modal-options-area { display: flex; flex-direction: column; gap: var(--pp-space-md); /* INCREASED GAP */ margin-block-end: var(--pp-space-xl); }
.option-label { display: block; }
.option-button {
    width: 100%; /* Changed from inline-size */
    padding: calc(var(--pp-space-md) * 0.9) var(--pp-space-lg);
    font-size: 1rem; text-align: start; justify-content: flex-start;
    box-shadow: none; background-color: var(--pp-color-light); border: 1px solid var(--pp-color-border-light);
    color: var(--pp-color-text); /* Ensure base color */
    transition: background-color 0.15s ease-out, border-color 0.15s ease-out, color 0.15s ease-out;
    border-radius: var(--pp-border-radius); cursor: pointer; display: block;
}
.option-label:hover .option-button, .option-label .option-button:focus-visible { background-color: var(--pp-color-light-accent); border-color: var(--pp-color-primary); color: var(--pp-color-primary-dark); transform: none; box-shadow: none; }
/* States */
.option-button.correct { background-color: var(--pp-color-success-light) !important; border-color: var(--pp-color-success) !important; color: var(--pp-color-success-dark) !important; font-weight: var(--pp-font-medium); }
.option-button.incorrect { background-color: var(--pp-color-danger-light) !important; border-color: var(--pp-color-danger) !important; color: var(--pp-color-danger-dark) !important; }
.option-button[disabled]:not(.correct):not(.incorrect) { opacity: 0.6; background-color: var(--pp-color-light); border-color: var(--pp-color-border-light); color: var(--pp-color-text-lighter); cursor: not-allowed; }
.option-label .option-button[disabled] { pointer-events: none; }
/* Feedback */
.quiz-feedback { padding: var(--pp-space-md); margin-block: var(--pp-space-md) var(--pp-space-xl); border-radius: var(--pp-border-radius); line-height: 1.6; font-size: 0.9rem; border-inline-start: 4px solid; }
.quiz-feedback.correct { border-inline-start-color: var(--pp-color-success); background-color: var(--pp-color-success-light); color: var(--pp-color-success-dark); }
.quiz-feedback.incorrect { border-inline-start-color: var(--pp-color-danger); background-color: var(--pp-color-danger-light); color: var(--pp-color-danger-dark); }
.quiz-feedback strong { font-weight: var(--pp-font-bold); }
.quiz-feedback p { max-inline-size: none; margin-block-end: 0; }
/* Results */
.quiz-results { text-align: center; padding-block: var(--pp-space-lg) 0; }
.quiz-results h4 { font-size: 1.4rem; margin-block-end: var(--pp-space-md); color: var(--pp-color-primary-heading); }
.quiz-results p { color: var(--pp-color-text); font-size: 1.05rem; margin-block-end: var(--pp-space-sm); max-inline-size: none; }
.quiz-score-percentage { font-size: 1.25rem !important; font-weight: var(--pp-font-bold); color: var(--pp-color-primary) !important; margin-block-end: var(--pp-space-lg) !important; }
.quiz-result-message { /* Changed color for better readability */ color: var(--pp-color-text) !important; font-weight: var(--pp-font-medium); font-style: italic; margin-block-start: var(--pp-space-sm); }
.quiz-modal-navigation { display: flex; flex-wrap: wrap; justify-content: center; gap: var(--pp-space-md); margin-block-start: var(--pp-space-lg); padding-block-start: var(--pp-space-lg); border-block-start: 1px solid var(--pp-color-border-light); }
.quiz-modal-navigation .btn.small { flex-grow: 1; min-inline-size: 120px; }
/* Prompt */
.quiz-modal-prompt { margin: var(--pp-space-xl) auto; padding: var(--pp-space-lg); background-color: var(--pp-color-light-accent); border-radius: var(--pp-border-radius); border: 1px solid var(--pp-color-border); text-align: center; max-inline-size: 95%; }
.quiz-modal-prompt p { color: var(--pp-color-primary-dark); margin-block-end: 0; max-inline-size: none; }


/* --- Feedback Modal Specific Styles --- */
.feedback-modal-content { max-inline-size: 550px; }
.feedback-intro { /* text color ok */ }
.permission-group { /* bg light ok */ }
.permission-group .checkbox-label { color: var(--pp-color-text-light); }
.permission-group input[type="checkbox"] { accent-color: var(--pp-color-green); }
.feedback-form .btn { inline-size: 100%; }


/* --- Intermediate Tablet Breakpoint --- */
@media (min-width: 768px) and (max-width: 1023px) {
  /* Nav Bar Height */
  .site-header { block-size: var(--pp-header-height-intermediate); }
  .logo img { block-size: 25px; }
  #primary-navigation.active { inset-block-start: var(--pp-header-height-intermediate); max-block-size: calc(100vh - var(--pp-header-height-intermediate)); }

  /* Card Image Aspect Ratio (If deliberate change desired) */
  .resource-card .card-image,
  .template-card .template-preview {
    aspect-ratio: 3/2; /* May cause reflow, use cautiously */
  }

  /* Button Sizing */
  .btn { padding-block: 10px; padding-inline: 20px; font-size: 0.95rem; }
  .btn.small { padding-block: 6px; padding-inline: 16px; font-size: 0.85rem; }
  .btn.large { padding-block: 12px; padding-inline: 28px; font-size: 1.05rem; }
}
/* Reset Styles Above Intermediate Breakpoint */
@media (min-width: 1024px) {
  .site-header { block-size: var(--pp-header-height); }
  #primary-navigation.active { inset-block-start: var(--pp-header-height); max-block-size: calc(100vh - var(--pp-header-height)); }
  .logo img { block-size: 30px; }
  /* Reset aspect ratios explicitly */
  .resource-card .card-image { aspect-ratio: 16/10; }
  .template-card .template-preview { aspect-ratio: 4/3; }
  /* Base button styles should re-apply naturally, no reset needed unless specifically overridden */
}

/* --- Footer Styles (LOGO VISIBILITY FIX) --- */
.site-footer {
    background-color: var(--pp-color-primary-dark); /* Dark BG */
    color: var(--pp-color-footer-text, #cbd5e1); /* Default light text */
    padding-block-start: var(--pp-space-xxxl); padding-block-end: var(--pp-space-xl);
    font-size: 0.9rem; line-height: 1.7;
}
.page-footer-links { padding-block-end: var(--pp-space-xl); margin-block-end: var(--pp-space-xl); border-block-end: 1px solid rgba(255, 255, 255, 0.1); }
.footer-links-container { /* Auto-fit grid ok */ }
.page-footer-links h4 { /* Color/border ok */ }
.page-footer-links ul li { margin-block-end: var(--pp-space-sm); }
.page-footer-links ul li a { color: var(--pp-color-footer-link, #e2e8f0); transition: color var(--pp-transition-fast), padding-inline-start var(--pp-transition-fast); display: inline-block; text-decoration: none; }
.page-footer-links ul li a:hover, .page-footer-links ul li a:focus-visible { color: var(--pp-color-footer-link-hover, #ffffff); padding-inline-start: 5px; text-decoration: underline; }
.footer-contact-info { margin-block-end: var(--pp-space-lg); }
.footer-contact-info li { display: flex; align-items: center; gap: var(--pp-space-sm); margin-block-end: var(--pp-space-sm); }
.footer-contact-info li i { inline-size: 18px; text-align: center; font-size: 0.9em; color: var(--pp-color-light-accent); flex-shrink: 0; }
.footer-contact-info li a { color: var(--pp-color-footer-link, #e2e8f0); word-break: break-word; }
.footer-contact-info li a:hover, .footer-contact-info li a:focus-visible { color: var(--pp-color-footer-link-hover, #ffffff); text-decoration: underline; }
.footer-connect-title { margin-block-end: var(--pp-space-md); font-weight: var(--pp-font-semibold); color: var(--pp-color-secondary); font-size: 1rem; }
.social-media { display: flex; flex-wrap: wrap; gap: var(--pp-space-md); margin-block-start: var(--pp-space-sm); }
.social-link {
    display: inline-flex; align-items: center; justify-content: center; inline-size: 36px; block-size: 36px; border-radius: 50%;
    font-size: 1rem; color: #e2e8f0; background-color: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.15);
    transition: background-color var(--pp-transition-medium), border-color var(--pp-transition-medium), color var(--pp-transition-medium), transform var(--pp-transition-medium);
}
.social-link:hover, .social-link:focus-visible { background-color: var(--pp-color-secondary); border-color: var(--pp-color-secondary); color: var(--pp-color-primary-dark); transform: translateY(-2px) scale(1.08); text-decoration: none; }

.footer-content { display: flex; flex-direction: column; align-items: center; gap: var(--pp-space-md); margin-block-end: var(--pp-space-xl); padding-block-start: var(--pp-space-sm); }
@media (min-width: 768px) { .footer-content { flex-direction: row; justify-content: space-between; align-items: flex-end; } }
.footer-left { text-align: center; } @media (min-width: 768px) { .footer-left { text-align: start; } }

/* Ensure Footer Logo area has no interfering styles */
.footer-left .logo { background: none; filter: none; opacity: 1; padding: 0; line-height: 1; margin: 0 auto var(--pp-space-sm) auto; }
@media (min-width: 768px) { .footer-left .logo { margin: 0 0 var(--pp-space-sm) 0; } }
.footer-left .logo img { display: block; block-size: 30px; inline-size: 120px; object-fit: contain; background-color: transparent; /* Explicit transparent bg */}

.footer-tagline { margin: 0; font-size: 0.9rem; color: rgba(255, 255, 255, 0.8); max-inline-size: none; }
.footer-right { /* placeholder */ }
.copyright { text-align: center; padding-block-start: var(--pp-space-lg); margin-block-start: var(--pp-space-xl); border-block-start: 1px solid rgba(255, 255, 255, 0.1); }
.copyright p { font-size: 0.85rem; line-height: 1.5; color: var(--pp-color-footer-copyright, #a0aec0); margin-block-end: 0; max-inline-size: none; }

/* --- Decorative Background Blurs --- */
.deco-blur { position: absolute; border-radius: 50%; filter: blur(150px); opacity: 0.1; z-index: -1; pointer-events: none; animation: float 30s infinite ease-in-out alternate; }
.blur-1 { inline-size: clamp(280px, 38vw, 480px); block-size: clamp(280px, 38vw, 480px); background: radial-gradient(circle, var(--pp-color-green) 0%, transparent 70%); inset-block-start: 5%; inset-inline-start: -18%; animation-duration: 32s; }
.blur-2 { inline-size: clamp(380px, 48vw, 580px); block-size: clamp(380px, 48vw, 580px); background: radial-gradient(circle, var(--pp-color-light-accent) 0%, transparent 70%); inset-block-start: 40%; inset-inline-end: -22%; animation-duration: 35s; animation-delay: -6s; }
.blur-3 { inline-size: clamp(280px, 33vw, 430px); block-size: clamp(280px, 33vw, 430px); background: radial-gradient(circle, var(--pp-color-primary) 0%, transparent 70%); inset-block-end: 8%; inset-inline-start: 8%; opacity: 0.07; animation-duration: 28s; animation-delay: -12s; }
@keyframes float { 0% { transform: translate(0px, 0px) rotate(0deg) scale(1); } 50% { transform: translate(30px, -25px) rotate(120deg) scale(1.03); } 100% { transform: translate(-20px, 40px) rotate(360deg) scale(0.97); } }

/* --- Reduced Motion --- */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
      animation-delay: -1ms !important; animation-duration: 1ms !important;
      animation-iteration-count: 1 !important; background-attachment: initial !important;
      scroll-behavior: auto !important; transition-duration: 0s !important;
      transition-delay: 0s !important; transition-property: none !important;
  }
  /* Reset specific transforms */
  .btn:hover, .btn:focus-visible, .btn:active { transform: none !important; }
  .resource-card:hover, .resource-card:focus-within { transform: none !important; }
  .category-card:hover, .category-card:focus-within { transform: none !important; }
  .template-card:hover, .template-card:focus-within { transform: none !important; }
  .social-link:hover, .social-link:focus-visible { transform: none !important; }
  .modal-content { transform: scale(1) translateY(0) !important; }
  /* Ensure template hover effect is off */
   .template-image-default { opacity: 1 !important; }
   .template-image-hover { opacity: 0 !important; }
   /* Ensure modal transitions are off */
   .modal-overlay { transition: none !important; }
   .modal-overlay:not([hidden]) { opacity: 1; visibility: visible; }
   /* Remove will-change globally */
   * { will-change: auto !important; }
}

/* --- Fade-In Animation Styling --- */
[data-animate-fade-in] {
    opacity: 0; transform: translateY(25px);
    transition: opacity var(--pp-transition-slow) cubic-bezier(0.165, 0.84, 0.44, 1),
                transform var(--pp-transition-slow) cubic-bezier(0.165, 0.84, 0.44, 1);
    /* will-change is not added here, rely on browser optimization for opacity/transform */
}
[data-animate-fade-in].is-visible {
    opacity: 1; transform: translateY(0);
}

/* --- Print Styles --- */
@media print {
    @page { size: A4; margin: 1.2cm; }
    html, body { background-color: #fff !important; color: #000 !important; box-shadow: none !important; border: none !important; }
    body { padding-block-start: 0 !important; font-size: 9.5pt !important; font-family: 'Times New Roman', Times, serif !important; }
    :root { /* Reset variables that affect print */
        --pp-border-radius: 0px !important; --pp-border-radius-large: 0px !important;
        --pp-box-shadow-sm: none !important; --pp-box-shadow: none !important; --pp-box-shadow-lg: none !important;
        /* Ensure colors resolve to black/white */
        --pp-color-primary: #000 !important; --pp-color-green: #000 !important;
        --pp-color-text: #000 !important; --pp-color-text-light: #000 !important;
        --pp-color-primary-heading: #000 !important;
        --pp-header-height: auto !important; /* Reset */
    }
    /* Hide non-essential elements */
    .site-header, .mobile-menu-toggle, .deco-blur, .motivational-quote,
    .hero-actions, .hero-stats-grid, .approach-icon, .approach-highlights,
    .social-integration, #learning-hub .start-quiz-btn, .full-challenge-link,
    .template-preview, .get-spreadsheet-btn, .template-price-note,
    #financial-tools-promo, #personal-coaching .coaching-interest, .disclaimer,
    #mmisbalior-section .promo-visual, #mmisbalior-section .btn, #feedback-section,
    .modal-overlay,
    .site-footer .page-footer-links div:nth-child(n+2), /* Hide less important footer cols */
    .site-footer .social-media, .site-footer .footer-contact-info li:not(:first-of-type),
    .site-footer .footer-connect-title, .site-footer .footer-right, .site-footer .logo, /* Hide footer logo */
    .card-cta .btn, /* Hide most cta buttons */
    .btn:not(.download-pdf-btn) /* Allow specific PDF button */
    { display: none !important; visibility: hidden !important; }

    .container { max-inline-size: 100% !important; inline-size: auto !important; padding: 0 !important; margin: 0 !important; }
    main { padding-block-start: 0 !important; }
    section, aside { padding-block: 0.5cm !important; page-break-inside: avoid !important; border: none !important; background: none !important; box-shadow: none !important; }
    #hero { text-align: start !important; padding-block: 0.5cm !important; }
    h1, h2, h3, h4 { color: #000 !important; font-family: 'Times New Roman', Times, serif !important; margin-block-end: 0.4em; page-break-after: avoid; page-break-inside: avoid; text-align: start !important; font-weight: bold; font-size: 1.1em; }
    h1 { font-size: 1.4em; } h2 { font-size: 1.25em; } h3 { font-size: 1.15em; }
    .section-title::after { display: none !important; }
    p, li { color: #000 !important; font-family: 'Times New Roman', Times, serif !important; line-height: 1.3; text-align: start !important; font-size: 9.5pt; max-inline-size: none !important; }
    /* Basic list style for print */
    ul:not(.footer-contact-info):not(.calculator-features-list):not(.coaching-info ul):not(.nav-list) { padding-inline-start: 1cm; list-style: disc !important; }
    /* Replace icons with bullets */
    .calculator-features-list li::before, .coaching-info li::before { content: '\2022'; margin-inline-end: 0.5em; /* Unicode bullet */ display: inline-block; /* Ensure it renders */ }
    .calculator-features-list li i, .coaching-info li i { display: none !important; } /* Hide original icon */

    a { color: inherit !important; text-decoration: underline !important; }
    a[href]:not([href^="#"])::after { content: " (" attr(href) ")"; font-size: 8pt; word-break: break-all; color: #555; }
    a[href^="#"]::after, a[href^="mailto:"]::after, a[href^="tel:"]::after, .btn::after, .nav-link::after { content: "" !important; }

    /* Stack grid items */
    .resource-grid, .template-grid, .category-grid, .hero-stats-grid, .footer-links-container { display: block !important; gap: 0 !important; }
    .resource-card, .template-card, .category-card, .stat-card {
        inline-size: 100% !important; border: 1px solid #ccc !important; box-shadow: none !important; padding: 0.5cm !important;
        page-break-inside: avoid; background: #fff !important; margin-block-end: 0.5cm;
    }
    /* Hide card visual elements */
    .card-image, .category-icon, .template-preview { display: none !important; }
    .card-content, .template-details { padding: 0 !important; }
    .card-cta, .template-actions { margin-block-start: 0.5cm; padding-block-start: 0.3cm; border-block-start: 1px solid #ccc; }
    /* Template download button override */
    .template-actions .download-pdf-btn {
        display: inline-block !important; /* Make visible again */ visibility: visible !important; /* Override global hide */
        border: 1px solid #ccc !important; background: #eee !important; color: #000 !important;
        text-decoration: none !important; padding: 3px 6px !important; font-size: 8pt !important;
        text-align: center; inline-size: auto !important; /* Don't force full width */
    }
    .template-actions .download-pdf-btn i { display: none; }
    .template-actions .download-pdf-btn span::after { content: " (PDF)"; font-size: inherit; }
    .template-details p { flex-grow: 0; }

    /* Footer Print Cleanup */
    .site-footer { background: #fff !important; color: #000 !important; border-block-start: 1px solid #ccc !important; padding: 0.5cm 0 !important; text-align: start !important; margin-block-start: 1cm; }
    .footer-content { flex-direction: row; justify-content: space-between; margin-block-end: 0.5cm; align-items: flex-end; }
    .footer-left { text-align: start !important; }
    .footer-tagline { color: #333 !important; font-size: 9pt; margin-block-start: 0;}
    .copyright { border-block-start: none !important; padding-block-start: 0; margin-block-start: 0.5cm; text-align: start;}
    .copyright p { color: #555 !important; font-size: 8pt; }
}
